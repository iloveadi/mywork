<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ì›”ê°„ ê¸°ë¡ ë‹¬ë ¥</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap"
        rel="stylesheet" />
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        :root {
            --bg-main: #0f1117;
            --bg-header: #151820;
            --bg-cell: #1a1e2a;
            --bg-cell-weekend: #1d1525;
            --bg-cell-today: #1a2035;
            --border: #2a2f3e;
            --text-main: #d0d4e0;
            --text-muted: #6b7280;
            --text-day-sun: #ff4d6d;
            --text-day-sat: #5b8dee;
            --text-today: #ffffff;

            --row1-on: #e53e3e;
            --row1-on-text: #fff;
            --row1-off: #2d1a1a;
            --row1-off-text: #7a4a4a;

            --row2-on: #2b6cb0;
            --row2-on-text: #fff;
            --row2-off: #1a2235;
            --row2-off-text: #4a6090;

            --row3-on: #276749;
            --row3-on-text: #fff;
            --row3-off: #1a2820;
            --row3-off-text: #3a6650;
        }

        html,
        body {
            height: 100%;
            font-family: 'Noto Sans KR', sans-serif;
            background: var(--bg-main);
            color: var(--text-main);
            overflow: hidden;
        }

        /* â”€â”€ ì „ì²´ ë ˆì´ì•„ì›ƒ â”€â”€ */
        #app {
            display: flex;
            flex-direction: column;
            height: 100vh;
            padding: 8px 10px;
        }

        /* â”€â”€ í—¤ë” â”€â”€ */
        #cal-header {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 6px 10px;
            flex-shrink: 0;
        }

        #cal-title {
            font-size: 1.45rem;
            font-weight: 700;
            letter-spacing: -0.5px;
            color: #e8ecf4;
        }

        #cal-title .nepe-count {
            font-weight: 600;
            font-size: 1rem;
            margin-left: 10px;
            padding: 2px 10px;
            border-radius: 20px;
            background: #1e2535;
            border: 1px solid #3a4560;
            color: #8b9dc0;
            transition: background 0.3s, color 0.3s, border-color 0.3s;
            letter-spacing: 0;
        }

        #cal-title .nepe-count.goal-done {
            background: #1a3528;
            border-color: #276749;
            color: #4ade80;
        }

        #cal-title .nepe-count .count-num {
            color: #e2e8f0;
            font-size: 1.1rem;
        }

        #cal-title .nepe-count.goal-done .count-num {
            color: #4ade80;
        }

        /* ì €ì¥ ìƒíƒœ í‘œì‹œ */
        #save-status {
            font-size: 0.75rem;
            font-weight: 500;
            padding: 3px 10px;
            border-radius: 12px;
            margin-left: 4px;
            transition: opacity 0.3s;
        }

        #save-status:empty {
            display: none;
        }

        .status-loading {
            color: #8b9dc0;
            background: #1e2535;
            border: 1px solid #3a4560;
        }

        .status-saving {
            color: #f6ad55;
            background: #2d1f10;
            border: 1px solid #744210;
        }

        .status-saved {
            color: #4ade80;
            background: #1a3528;
            border: 1px solid #276749;
        }

        .status-error {
            color: #fc8181;
            background: #2d1515;
            border: 1px solid #742020;
        }

        .nav-btn {
            background: none;
            border: 1px solid var(--border);
            border-radius: 6px;
            color: var(--text-muted);
            width: 28px;
            height: 28px;
            cursor: pointer;
            font-size: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.18s;
        }

        .nav-btn:hover {
            background: #252a38;
            color: var(--text-main);
            border-color: #4a5270;
        }

        .lock-btn {
            font-size: 0.95rem;
            border-color: #3a3050;
            opacity: 0.55;
            transition: opacity 0.2s, background 0.18s, border-color 0.18s;
        }

        .lock-btn:hover {
            opacity: 1;
            background: #2a1e35;
            border-color: #7c5cbf;
        }

        /* â”€â”€ ë‹¬ë ¥ ê·¸ë¦¬ë“œ â”€â”€ */
        #calendar {
            flex: 1;
            display: grid;
            grid-template-rows: auto 1fr 1fr 1fr 1fr 1fr 1fr;
            /* í—¤ë” + ìµœëŒ€ 6ì£¼ */
            grid-template-columns: repeat(7, 1fr);
            gap: 1px;
            background: var(--border);
            border: 1px solid var(--border);
            border-radius: 10px;
            overflow: hidden;
            min-height: 0;
        }

        /* ìš”ì¼ í—¤ë” ì…€ */
        .day-header {
            background: var(--bg-header);
            text-align: center;
            font-size: 0.9rem;
            font-weight: 600;
            padding: 7px 0;
            letter-spacing: 0.5px;
            color: var(--text-muted);
        }

        .day-header.sun {
            color: var(--text-day-sun);
        }

        .day-header.sat {
            color: var(--text-day-sat);
        }

        /* ë‚ ì§œ ì…€ */
        .cell {
            background: var(--bg-cell);
            padding: 4px 5px;
            display: flex;
            flex-direction: column;
            gap: 2px;
            overflow: hidden;
            position: relative;
            min-height: 0;
        }

        .cell.weekend {
            background: var(--bg-cell-weekend);
        }

        .cell.empty {
            background: #12151e;
            opacity: 0.4;
        }

        .cell.today {
            background: var(--bg-cell-today);
        }

        .cell.today::after {
            content: '';
            position: absolute;
            inset: 0;
            border: 2px solid #3b5bdb;
            border-radius: 2px;
            pointer-events: none;
        }

        /* ë‚ ì§œ ìˆ«ì */
        .date-num {
            font-size: 0.88rem;
            font-weight: 700;
            color: #8b9dc0;
            line-height: 1;
            margin-bottom: 2px;
        }

        .cell.sun .date-num {
            color: #e05070;
        }

        .cell.sat .date-num {
            color: #5b8dee;
        }

        .cell.today .date-num {
            background: #3b5bdb;
            color: #fff;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* ë°°ì§€ í–‰ */
        .badge-row {
            display: flex;
            flex-wrap: wrap;
            gap: 2px;
        }

        /* ë°°ì§€ */
        .badge {
            font-size: 0.76rem;
            font-weight: 600;
            padding: 2px 6px;
            border-radius: 4px;
            cursor: pointer;
            user-select: none;
            letter-spacing: -0.2px;
            transition: transform 0.1s, filter 0.15s;
            white-space: nowrap;
        }

        .badge:hover {
            transform: scale(1.08);
            filter: brightness(1.2);
        }

        .badge:active {
            transform: scale(0.95);
        }

        /* í–‰ë³„ ìƒ‰ìƒ */
        .badge.row1 {
            background: var(--row1-off);
            color: var(--row1-off-text);
        }

        .badge.row1.on {
            background: var(--row1-on);
            color: var(--row1-on-text);
        }

        .badge.row2 {
            background: var(--row2-off);
            color: var(--row2-off-text);
        }

        .badge.row2.on {
            background: var(--row2-on);
            color: var(--row2-on-text);
        }

        .badge.row3 {
            background: var(--row3-off);
            color: var(--row3-off-text);
        }

        .badge.row3.on {
            background: var(--row3-on);
            color: var(--row3-on-text);
        }

        /* 5ì£¼ vs 6ì£¼ ê·¸ë¦¬ë“œ í–‰ ì„¤ì • */
        #calendar.weeks-4 {
            grid-template-rows: auto 1fr 1fr 1fr 1fr;
        }

        #calendar.weeks-5 {
            grid-template-rows: auto 1fr 1fr 1fr 1fr 1fr;
        }

        #calendar.weeks-6 {
            grid-template-rows: auto 1fr 1fr 1fr 1fr 1fr 1fr;
        }

        /* â”€â”€ ì ê¸ˆ í™”ë©´ â”€â”€ */
        #lock-screen {
            position: fixed;
            inset: 0;
            z-index: 9999;
            background: #0a0c12;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 28px;
        }

        #lock-screen.hidden {
            display: none;
        }

        .lock-icon {
            font-size: 2.2rem;
            opacity: 0.6;
        }

        .lock-title {
            font-size: 1rem;
            color: #6b7280;
            font-weight: 500;
            letter-spacing: 1px;
        }

        .pin-dots {
            display: flex;
            gap: 16px;
        }

        .pin-dot {
            width: 14px;
            height: 14px;
            border-radius: 50%;
            border: 2px solid #3a4560;
            background: transparent;
            transition: background 0.15s, border-color 0.15s;
        }

        .pin-dot.filled {
            background: #5b8dee;
            border-color: #5b8dee;
        }

        .pin-dot.error {
            background: #e53e3e;
            border-color: #e53e3e;
        }

        .pin-keypad {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-top: 8px;
        }

        .pin-key {
            width: 68px;
            height: 68px;
            border-radius: 50%;
            border: 1px solid #2a2f3e;
            background: #151820;
            color: #d0d4e0;
            font-size: 1.4rem;
            font-weight: 500;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.15s, transform 0.1s;
            font-family: 'Noto Sans KR', sans-serif;
            user-select: none;
        }

        .pin-key:hover {
            background: #1e2535;
        }

        .pin-key:active {
            transform: scale(0.92);
            background: #252a3a;
        }

        .pin-key.del {
            font-size: 1rem;
            color: #6b7280;
        }

        .pin-key.zero {
            grid-column: 2;
        }

        @keyframes shake {

            0%,
            100% {
                transform: translateX(0);
            }

            20% {
                transform: translateX(-8px);
            }

            40% {
                transform: translateX(8px);
            }

            60% {
                transform: translateX(-6px);
            }

            80% {
                transform: translateX(6px);
            }
        }

        .pin-dots.shake {
            animation: shake 0.4s ease;
        }
    </style>
</head>


<body>
    <!-- ì ê¸ˆ í™”ë©´ -->
    <div id="lock-screen">
        <div class="lock-icon">ğŸ”’</div>
        <div class="lock-title">ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”</div>
        <div class="pin-dots" id="pin-dots">
            <div class="pin-dot" id="d0"></div>
            <div class="pin-dot" id="d1"></div>
            <div class="pin-dot" id="d2"></div>
            <div class="pin-dot" id="d3"></div>
        </div>
        <div class="pin-keypad">
            <button class="pin-key" data-v="1">1</button>
            <button class="pin-key" data-v="2">2</button>
            <button class="pin-key" data-v="3">3</button>
            <button class="pin-key" data-v="4">4</button>
            <button class="pin-key" data-v="5">5</button>
            <button class="pin-key" data-v="6">6</button>
            <button class="pin-key" data-v="7">7</button>
            <button class="pin-key" data-v="8">8</button>
            <button class="pin-key" data-v="9">9</button>
            <button class="pin-key del" id="pin-del">âŒ«</button>
            <button class="pin-key zero" data-v="0">0</button>
        </div>
    </div>

    <!-- ë‹¬ë ¥ ë³¸ì²´ -->
    <div id="app">
        <div id="cal-header">
            <button class="nav-btn lock-btn" id="btn-lock" title="ì ê¸ˆ">ğŸ”’</button>
            <button class="nav-btn" id="btn-prev">&#8249;</button>
            <div id="cal-title">ë¡œë”© ì¤‘â€¦</div>
            <button class="nav-btn" id="btn-next">&#8250;</button>
            <span id="save-status"></span>
        </div>
        <div id="calendar"></div>
    </div>

    <script type="module">
        // â”€â”€ PIN ì ê¸ˆ í™”ë©´ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        const CORRECT_PIN = '1212';
        const lockScreen = document.getElementById('lock-screen');
        const pinDotsEl = document.getElementById('pin-dots');
        const dotEls = [0, 1, 2, 3].map(i => document.getElementById('d' + i));
        let pinInput = '';

        function updateDots(isError) {
            dotEls.forEach((el, i) => {
                el.classList.toggle('filled', i < pinInput.length && !isError);
                el.classList.toggle('error', i < pinInput.length && isError);
            });
        }

        function tryUnlock() {
            if (pinInput === CORRECT_PIN) {
                sessionStorage.setItem('unlocked', '1');
                lockScreen.classList.add('hidden');
            } else {
                updateDots(true);
                pinDotsEl.classList.add('shake');
                pinDotsEl.addEventListener('animationend', () => {
                    pinDotsEl.classList.remove('shake');
                    pinInput = '';
                    updateDots(false);
                }, { once: true });
            }
        }

        // ì„¸ì…˜ ì¤‘ ì´ë¯¸ ì¸ì¦ëœ ê²½ìš° ë°”ë¡œ í†µê³¼
        if (sessionStorage.getItem('unlocked') === '1') {
            lockScreen.classList.add('hidden');
        }

        // í‚¤íŒ¨ë“œ í´ë¦­
        document.querySelectorAll('.pin-key[data-v]').forEach(btn => {
            btn.addEventListener('click', () => {
                if (pinInput.length >= 4) return;
                pinInput += btn.dataset.v;
                updateDots(false);
                if (pinInput.length === 4) tryUnlock();
            });
        });
        document.getElementById('pin-del').addEventListener('click', () => {
            pinInput = pinInput.slice(0, -1);
            updateDots(false);
        });
        // í‚¤ë³´ë“œ ì§€ì›
        document.addEventListener('keydown', e => {
            if (lockScreen.classList.contains('hidden')) return;
            if (e.key >= '0' && e.key <= '9' && pinInput.length < 4) {
                pinInput += e.key;
                updateDots(false);
                if (pinInput.length === 4) tryUnlock();
            } else if (e.key === 'Backspace') {
                pinInput = pinInput.slice(0, -1);
                updateDots(false);
            }
        });

        // í—¤ë” í´ë¦­ ì‹œ ì ê¸ˆ
        function lock() {
            sessionStorage.removeItem('unlocked');
            pinInput = '';
            updateDots(false);
            lockScreen.classList.remove('hidden');
        }
        document.getElementById('btn-lock').addEventListener('click', lock);

        // â”€â”€ Firebase SDK â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.8.1/firebase-app.js';
        import { getFirestore, doc, getDoc, setDoc } from 'https://www.gstatic.com/firebasejs/10.8.1/firebase-firestore.js';

        const firebaseConfig = {
            apiKey: "AIzaSyD2HN1O7m0wxD3foaL-fY0HU9uG435sIdc",
            authDomain: "mywork-73765.firebaseapp.com",
            projectId: "mywork-73765",
            storageBucket: "mywork-73765.firebasestorage.app",
            messagingSenderId: "1098551880523",
            appId: "1:1098551880523:web:b37520653cb207178996ce"
        };

        const fbApp = initializeApp(firebaseConfig);
        const db = getFirestore(fbApp);

        // â”€â”€ ì„¤ì •: ë°°ì§€ í–‰ë³„ ì´ë¦„ ëª©ë¡ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        const ROWS = [
            ['ìˆ˜ë©´', 'ë‚®ì ', 'íŠ¸ë¿œ'],           // 1í–‰ â†’ ë¹¨ê°„ìƒ‰
            ['ë§ˆìŒ', 'ë‚˜í—ˆ', 'ì¸ë¶', 'ì‰¼í‘œ'],   // 2í–‰ â†’ íŒŒë€ìƒ‰
            ['ë„¤í', 'í‹°í'],                   // 3í–‰ â†’ ë…¹ìƒ‰
        ];

        // â”€â”€ ìƒíƒœ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        const today = new Date();
        let curYear = today.getFullYear();
        let curMonth = today.getMonth();   // 0-based

        // states[yyyy-mm][dd][rowIdx][badgeIdx] = true/false (ë¡œì»¬ ìºì‹œ)
        const states = {};

        // â”€â”€ ì €ì¥ ìƒíƒœ UI â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        const saveStatusEl = document.getElementById('save-status');
        let saveTimer = null;

        function setSaveStatus(msg, cls) {
            saveStatusEl.textContent = msg;
            saveStatusEl.className = cls;
        }

        // â”€â”€ Firestore ìœ í‹¸ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        function stateKey(year, month) {
            return `${year}-${String(month + 1).padStart(2, '0')}`;
        }

        function initMonthState(year, month) {
            const key = stateKey(year, month);
            if (!states[key]) {
                const days = new Date(year, month + 1, 0).getDate();
                states[key] = {};
                for (let d = 1; d <= days; d++) {
                    states[key][d] = ROWS.map(row => row.map(() => false));
                }
            }
            return states[key];
        }

        // Firestoreì—ì„œ í•´ë‹¹ ì›” ë°ì´í„° ë¡œë“œ
        async function loadMonth(year, month) {
            setSaveStatus('ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘â€¦', 'status-loading');
            const key = stateKey(year, month);
            const ref = doc(db, 'calendar', key);
            initMonthState(year, month);  // ê¸°ë³¸ê°’ ì„¸íŒ…
            try {
                const snap = await getDoc(ref);
                if (snap.exists()) {
                    // JSON ë¬¸ìì—´ë¡œ ì €ì¥ëœ ê°’ì„ íŒŒì‹±
                    const saved = JSON.parse(snap.data().states);
                    Object.keys(saved).forEach(d => {
                        if (states[key][d]) states[key][d] = saved[d];
                    });
                }
                setSaveStatus('', '');
            } catch (e) {
                setSaveStatus('âš  ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨', 'status-error');
                console.error(e);
            }
        }

        // Firestoreì— í˜„ì¬ ì›” ë°ì´í„° ì €ì¥ (ë””ë°”ìš´ìŠ¤)
        function scheduleSave(year, month) {
            setSaveStatus('ì €ì¥ ì¤‘â€¦', 'status-saving');
            clearTimeout(saveTimer);
            saveTimer = setTimeout(() => saveMonth(year, month), 1000);
        }

        async function saveMonth(year, month) {
            const key = stateKey(year, month);
            const ref = doc(db, 'calendar', key);
            try {
                // ì¤‘ì²© ë°°ì—´ ë¬¸ì œ í•´ê²°: JSON ë¬¸ìì—´ë¡œ ì €ì¥
                await setDoc(ref, { states: JSON.stringify(states[key]) });
                setSaveStatus('âœ“ ì €ì¥ë¨', 'status-saved');
                setTimeout(() => setSaveStatus('', ''), 2000);
            } catch (e) {
                setSaveStatus('âš  ì €ì¥ ì‹¤íŒ¨', 'status-error');
                console.error(e);
            }
        }

        // â”€â”€ ë¡œì»¬ ìƒíƒœ ìœ í‹¸ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        function getState(year, month) {
            return states[stateKey(year, month)];
        }

        function toggleBadge(year, month, day, rowIdx, badgeIdx) {
            const state = getState(year, month);
            state[day][rowIdx][badgeIdx] = !state[day][rowIdx][badgeIdx];
        }

        function isOn(year, month, day, rowIdx, badgeIdx) {
            const state = getState(year, month);
            return state && state[day] && state[day][rowIdx] && state[day][rowIdx][badgeIdx];
        }

        // â”€â”€ ë Œë”ë§ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        const calEl = document.getElementById('calendar');
        const titleEl = document.getElementById('cal-title');
        const DAY_NAMES = ['ì¼', 'ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† '];
        const NEPE_GOAL = 15;

        function countNepe(year, month) {
            const state = getState(year, month);
            if (!state) return 0;
            const days = new Date(year, month + 1, 0).getDate();
            let count = 0;
            for (let d = 1; d <= days; d++) {
                if (state[d] && state[d][2] && state[d][2][0]) count++;
            }
            return count;
        }

        function updateTitle(year, month) {
            const cnt = countNepe(year, month);
            const done = cnt >= NEPE_GOAL;
            titleEl.innerHTML =
                `${year}ë…„ ${month + 1}ì›”` +
                `<span class="nepe-count${done ? ' goal-done' : ''}" title="ë„¤í(ë¸”ë¡œê·¸) ì‘ì„± íšŸìˆ˜">` +
                `ë„¤í <span class="count-num">${cnt}</span> / ${NEPE_GOAL}` +
                `</span>`;
        }

        function render() {
            calEl.innerHTML = '';

            const year = curYear;
            const month = curMonth;
            const firstDay = new Date(year, month, 1).getDay();
            const daysInMonth = new Date(year, month + 1, 0).getDate();
            const totalCells = firstDay + daysInMonth;
            const numWeeks = Math.ceil(totalCells / 7);
            calEl.className = `weeks-${numWeeks}`;

            updateTitle(year, month);

            // ìš”ì¼ í—¤ë”
            DAY_NAMES.forEach((name, i) => {
                const el = document.createElement('div');
                el.className = 'day-header' + (i === 0 ? ' sun' : i === 6 ? ' sat' : '');
                el.textContent = name;
                calEl.appendChild(el);
            });

            // ë‚ ì§œ ì…€
            for (let cell = 0; cell < numWeeks * 7; cell++) {
                const day = cell - firstDay + 1;
                const weekday = cell % 7;
                const isValid = day >= 1 && day <= daysInMonth;

                const cellEl = document.createElement('div');
                cellEl.className = 'cell';
                if (!isValid) {
                    cellEl.classList.add('empty');
                } else {
                    if (weekday === 0) cellEl.classList.add('sun', 'weekend');
                    if (weekday === 6) cellEl.classList.add('sat', 'weekend');
                    const isToday = (year === today.getFullYear() && month === today.getMonth() && day === today.getDate());
                    if (isToday) cellEl.classList.add('today');

                    // ë‚ ì§œ ìˆ«ì
                    const numEl = document.createElement('div');
                    numEl.className = 'date-num';
                    numEl.textContent = day;
                    cellEl.appendChild(numEl);

                    // ë°°ì§€ í–‰ë“¤
                    ROWS.forEach((rowItems, rowIdx) => {
                        const rowEl = document.createElement('div');
                        rowEl.className = 'badge-row';

                        rowItems.forEach((label, badgeIdx) => {
                            const badgeEl = document.createElement('span');
                            const on = isOn(year, month, day, rowIdx, badgeIdx);
                            badgeEl.className = `badge row${rowIdx + 1}${on ? ' on' : ''}`;
                            badgeEl.textContent = label;
                            badgeEl.addEventListener('click', () => {
                                toggleBadge(year, month, day, rowIdx, badgeIdx);
                                badgeEl.classList.toggle('on');
                                if (rowIdx === 2 && badgeIdx === 0) updateTitle(year, month);
                                scheduleSave(year, month);  // Firebaseì— ì €ì¥
                            });
                            rowEl.appendChild(badgeEl);
                        });

                        cellEl.appendChild(rowEl);
                    });
                }
                calEl.appendChild(cellEl);
            }
        }

        // â”€â”€ ì›” ë¡œë“œ & ë Œë” â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        async function changeMonth(year, month) {
            calEl.innerHTML = '<div style="grid-column:1/-1;display:flex;align-items:center;justify-content:center;color:#4a5270;font-size:0.9rem;">ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘â€¦</div>';
            await loadMonth(year, month);
            render();
        }

        // â”€â”€ ì´ë²¤íŠ¸ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        document.getElementById('btn-prev').addEventListener('click', () => {
            curMonth--;
            if (curMonth < 0) { curMonth = 11; curYear--; }
            changeMonth(curYear, curMonth);
        });
        document.getElementById('btn-next').addEventListener('click', () => {
            curMonth++;
            if (curMonth > 11) { curMonth = 0; curYear++; }
            changeMonth(curYear, curMonth);
        });

        // ì´ˆê¸° ë¡œë“œ
        changeMonth(curYear, curMonth);
    </script>
</body>

</html>